<div class="space-y-8">
  <header class="pb-6 border-b border-stone-200">
    <h2 class="text-4xl font-bold text-stone-800">Vendor Management</h2>
    <p class="mt-2 text-lg text-stone-600">Keep track of all your suppliers, from sound to flowers.</p>
  </header>
  
  <!-- Add/Edit Vendor Form -->
  <div class="bg-white p-6 rounded-2xl shadow-md border border-stone-200">
    <h3 class="text-2xl font-bold text-stone-800 mb-4">{{ editingVendor() ? 'Edit Vendor' : 'Add a New Vendor' }}</h3>
    <form [formGroup]="vendorForm" (ngSubmit)="handleSubmit()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
      
      <div class="lg:col-span-1">
        <label for="vendorName" class="block text-sm font-medium text-stone-700">Vendor Name</label>
        <input type="text" id="vendorName" name="vendorName" required
               formControlName="name"
               class="mt-1 block w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500">
      </div>
      
      <div>
        <label for="vendorCategory" class="block text-sm font-medium text-stone-700">Category</label>
        <select id="vendorCategory" name="vendorCategory"
                formControlName="category"
                class="mt-1 block w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500">
          @for (cat of categories; track cat) {
            <option [value]="cat">{{ cat }}</option>
          }
        </select>
      </div>

      <div>
        <label for="vendorContact" class="block text-sm font-medium text-stone-700">Contact Person</label>
        <input type="text" id="vendorContact" name="vendorContact" required
               formControlName="contactPerson"
               class="mt-1 block w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500">
      </div>

       <div>
        <label for="vendorEmail" class="block text-sm font-medium text-stone-700">Email</label>
        <input type="email" id="vendorEmail" name="vendorEmail" required
               formControlName="email"
               class="mt-1 block w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500">
      </div>

      <div>
        <label for="vendorPhone" class="block text-sm font-medium text-stone-700">Phone</label>
        <input type="tel" id="vendorPhone" name="vendorPhone"
               formControlName="phone"
               class="mt-1 block w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500">
      </div>
      
       <div>
        <label for="vendorStatus" class="block text-sm font-medium text-stone-700">Status</label>
        <select id="vendorStatus" name="vendorStatus"
                formControlName="status"
                class="mt-1 block w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500">
          @for (status of statuses; track status) {
            <option [value]="status">{{ status }}</option>
          }
        </select>
      </div>

      <div class="md:col-span-2 lg:col-span-3 flex justify-end gap-3 mt-2">
        @if (editingVendor()) {
          <button type="button" (click)="resetForm()"
                  class="px-4 py-2 bg-stone-200 text-stone-800 rounded-md hover:bg-stone-300 transition-colors">
            Cancel
          </button>
        }
        <button type="submit" [disabled]="vendorForm.invalid"
                class="px-4 py-2 bg-rose-500 text-white rounded-md hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 disabled:bg-rose-300 transition-colors">
          {{ editingVendor() ? 'Update Vendor' : 'Add Vendor' }}
        </button>
      </div>
    </form>
  </div>

  <!-- Vendor List Table -->
  <div class="bg-white rounded-2xl shadow-md border border-stone-200 overflow-hidden">
    <div class="overflow-x-auto">
        <table class="w-full text-left">
        <thead class="bg-stone-50 border-b border-stone-200">
          <tr>
            <th scope="col" class="px-6 py-3 text-sm font-semibold text-stone-600">Vendor</th>
            <th scope="col" class="px-6 py-3 text-sm font-semibold text-stone-600">Category</th>
            <th scope="col" class="px-6 py-3 text-sm font-semibold text-stone-600">Contact</th>
            <th scope="col" class="px-6 py-3 text-sm font-semibold text-stone-600">Status</th>
            <th scope="col" class="px-6 py-3 text-sm font-semibold text-stone-600 text-right">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-stone-200">
          @for (vendor of vendors(); track vendor.id) {
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-stone-800 font-medium">{{ vendor.name }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-stone-600">{{ vendor.category }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-stone-600">
                <div class="text-sm">{{ vendor.contactPerson }}</div>
                <div class="text-xs text-stone-500">{{ vendor.email }}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full" [class]="getStatusClass(vendor.status)">
                  {{ vendor.status }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button (click)="editVendor(vendor)" class="text-rose-600 hover:text-rose-900 mr-4">Edit</button>
                <button (click)="deleteVendor(vendor)" class="text-stone-500 hover:text-stone-800">Delete</button>
              </td>
            </tr>
          }
          @if (vendors().length === 0) {
            <tr>
                <td colspan="5" class="text-center py-8 text-stone-500">No vendors added yet.</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>