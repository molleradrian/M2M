<div class="bg-stone-50 p-6 rounded-2xl border border-stone-200">
  <h4 class="text-xl font-semibold text-stone-700 border-b border-stone-200 pb-2 mb-4">Tasks</h4>
  
  <!-- Progress Bar -->
  @if(tasks().length > 0) {
    <div class="mb-4">
      <div class="flex justify-between mb-1">
        <span class="text-sm font-medium text-stone-700">Progress</span>
        <span class="text-sm font-medium text-stone-700">{{ completedTasksCount() }} of {{ tasks().length }} done</span>
      </div>
      <div class="w-full bg-stone-200 rounded-full h-2.5">
        <div class="bg-rose-500 h-2.5 rounded-full transition-all duration-500" [style.width.%]="progress()"></div>
      </div>
    </div>
  }

  <!-- Add Task Form -->
  <form [formGroup]="taskForm" (ngSubmit)="addTask()" class="flex gap-2 mb-4">
    <input 
      type="text" 
      formControlName="description"
      placeholder="e.g., Finalize contract"
      class="flex-grow w-full px-3 py-2 bg-white border border-stone-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500 text-sm">
    <button 
      type="submit" 
      [disabled]="taskForm.invalid"
      class="px-4 py-2 bg-rose-500 text-white text-sm font-semibold rounded-md hover:bg-rose-600 disabled:bg-rose-300 transition-colors">
      Add
    </button>
  </form>
  
  <!-- Task List -->
  <div class="space-y-2 max-h-60 overflow-y-auto pr-2">
    @for(task of tasks(); track task.id) {
      <div class="flex items-center p-2 bg-white rounded-md border border-stone-200 group">
        <input 
          type="checkbox" 
          [id]="task.id"
          [checked]="task.completed"
          (change)="toggleCompletion(task)"
          class="h-4 w-4 rounded border-stone-300 text-rose-600 focus:ring-rose-500 cursor-pointer">
        <label 
          [for]="task.id"
          class="ml-3 flex-grow text-sm text-stone-700 cursor-pointer"
          [class.line-through]="task.completed"
          [class.text-stone-400]="task.completed">
          {{ task.description }}
        </label>
        <button (click)="deleteTask(task)" class="ml-2 text-stone-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    }
    @if(tasks().length === 0) {
      <p class="text-center text-sm text-stone-500 py-4">No tasks added for this vendor yet.</p>
    }
  </div>
</div>
